<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Transparency & Alpha Channel</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .slider-thumb::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 24px;
            height: 24px;
            background: #4f46e5;
            cursor: pointer;
            border-radius: 50%;
            border: 4px solid #fff;
            box-shadow: 0 0 5px rgba(0,0,0,0.2);
        }
        .slider-thumb::-moz-range-thumb {
            width: 20px;
            height: 20px;
            background: #4f46e5;
            cursor: pointer;
            border-radius: 50%;
            border: 4px solid #fff;
            box-shadow: 0 0 5px rgba(0,0,0,0.2);
        }
    </style>
</head>
<body class="bg-gray-900 text-gray-200 flex items-center justify-center min-h-screen p-4">

    <div class="w-full max-w-5xl bg-gray-800 rounded-2xl shadow-2xl p-6 md:p-10 mx-auto">
        <!-- Header -->
        <div class="text-center mb-8">
            <h1 class="text-3xl md:text-4xl font-bold text-white">Interactive Transparency Simulation</h1>
            <p class="text-gray-400 mt-2">Explore how the Alpha Channel blends colors in digital graphics.</p>
        </div>

        <div class="flex flex-col lg:flex-row gap-8 md:gap-12">

            <!-- Left Panel: Canvas Visualization -->
            <div class="flex-1 flex flex-col items-center justify-center bg-gray-900/50 p-6 rounded-xl border border-gray-700">
                <canvas id="simulationCanvas" width="300" height="300" class="rounded-lg shadow-lg"></canvas>
            </div>

            <!-- Right Panel: Controls and Explanation -->
            <div class="flex-1 space-y-6">
                <!-- Alpha Slider Control -->
                <div class="bg-gray-700/60 p-5 rounded-lg">
                    <div class="flex justify-between items-center mb-3">
                        <label for="alphaSlider" class="font-semibold text-lg text-white">Alpha (α) Value</label>
                        <span id="alphaValue" class="font-mono text-xl bg-indigo-600 text-white px-3 py-1 rounded-md">1.00</span>
                    </div>
                    <input id="alphaSlider" type="range" min="0" max="1" step="0.01" value="1" class="w-full h-3 bg-gray-600 rounded-lg appearance-none cursor-pointer slider-thumb">
                </div>

                <!-- Explanation Section -->
                <div class="bg-gray-700/60 p-5 rounded-lg space-y-4">
                    <h2 class="text-xl font-bold text-white border-b border-gray-600 pb-2">How It Works</h2>
                    
                    <!-- Color Key -->
                    <div class="flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 text-sm">
                         <div class="flex items-center space-x-2">
                            <input type="color" id="fgColorPicker" value="#ef4444" class="w-8 h-8 p-0 border-none rounded cursor-pointer bg-transparent">
                            <label for="fgColorPicker">Foreground: <span id="fgColorValue" class="font-mono">#ef4444</span></label>
                         </div>
                         <div class="flex items-center space-x-2">
                            <input type="color" id="bgColorPicker" value="#3b82f6" class="w-8 h-8 p-0 border-none rounded cursor-pointer bg-transparent">
                            <label for="bgColorPicker">Background: <span id="bgColorValue" class="font-mono">#3b82f6</span></label>
                         </div>
                    </div>

                    <!-- Formula -->
                    <p class="text-gray-300">The final color is a mix of the foreground and background colors, controlled by the alpha (α) value. The formula for each color channel (Red, Green, Blue) is:</p>
                    <div class="bg-gray-900/70 p-4 rounded-md text-center font-mono text-sm md:text-base text-cyan-300">
                        Result = (Fg × α) + (Bg × (1 - α))
                    </div>
                    
                    <!-- Detailed Calculation -->
                    <div id="calculationDisplay" class="bg-gray-900/70 p-4 rounded-md font-mono text-xs md:text-sm text-gray-300 space-y-1">
                        <p id="redCalc"></p>
                        <p id="greenCalc"></p>
                        <p id="blueCalc"></p>
                    </div>

                    <!-- Resulting Color -->
                    <div>
                        <h3 class="font-semibold text-white mb-2">Calculated Result:</h3>
                        <div class="flex items-center justify-center space-x-4 bg-gray-900/70 p-4 rounded-md">
                             <div id="resultColorBox" class="w-10 h-10 rounded-lg border-2 border-gray-500 transition-colors duration-100"></div>
                             <span id="resultColorValue" class="font-mono text-lg text-yellow-300"></span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Back Button -->
        <div class="mt-8 text-center">
            <button onclick="history.back()" class="bg-indigo-600 hover:bg-indigo-700 text-white font-semibold py-2 px-6 rounded-lg shadow-md transition-colors duration-200">
                &larr; Go Back
            </button>
        </div>
    </div>

    <script>
        // DOM Element References
        const canvas = document.getElementById('simulationCanvas');
        const ctx = canvas.getContext('2d');
        const alphaSlider = document.getElementById('alphaSlider');
        const alphaValueDisplay = document.getElementById('alphaValue');
        const resultColorBox = document.getElementById('resultColorBox');
        const resultColorValue = document.getElementById('resultColorValue');
        const redCalcDisplay = document.getElementById('redCalc');
        const greenCalcDisplay = document.getElementById('greenCalc');
        const blueCalcDisplay = document.getElementById('blueCalc');
        
        const fgColorPicker = document.getElementById('fgColorPicker');
        const bgColorPicker = document.getElementById('bgColorPicker');
        const fgColorValue = document.getElementById('fgColorValue');
        const bgColorValue = document.getElementById('bgColorValue');


        // Color definitions
        let foregroundColor = hexToRgb(fgColorPicker.value);
        let backgroundColor = hexToRgb(bgColorPicker.value);
        
        // --- Utility Functions ---
        function hexToRgb(hex) {
            const result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);
            return result ? {
                r: parseInt(result[1], 16),
                g: parseInt(result[2], 16),
                b: parseInt(result[3], 16)
            } : null;
        }

        // --- Event Handlers ---
        function handleFgColorChange(event) {
            foregroundColor = hexToRgb(event.target.value);
            fgColorValue.textContent = event.target.value;
            draw();
        }
        
        function handleBgColorChange(event) {
            backgroundColor = hexToRgb(event.target.value);
            bgColorValue.textContent = event.target.value;
            draw();
        }

        // Function to draw the simulation on the canvas
        function draw() {
            // Get current alpha from slider
            const alpha = parseFloat(alphaSlider.value);
            
            // Clear canvas
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            // 1. Draw the background square (fully opaque)
            const bgRectSize = 200;
            const bgRectPos = (canvas.width - bgRectSize) / 2;
            ctx.fillStyle = `rgb(${backgroundColor.r}, ${backgroundColor.g}, ${backgroundColor.b})`;
            ctx.fillRect(bgRectPos, bgRectPos, bgRectSize, bgRectSize);

            // 2. Draw the foreground square with the specified alpha
            const fgRectSize = 150;
            const fgRectPos = (canvas.width - fgRectSize) / 2;
            ctx.fillStyle = `rgba(${foregroundColor.r}, ${foregroundColor.g}, ${foregroundColor.b}, ${alpha})`;
            ctx.fillRect(fgRectPos, fgRectPos, fgRectSize, fgRectSize);

            // 3. Calculate the blended color manually using the formula
            const resultR = Math.round((foregroundColor.r * alpha) + (backgroundColor.r * (1 - alpha)));
            const resultG = Math.round((foregroundColor.g * alpha) + (backgroundColor.g * (1 - alpha)));
            const resultB = Math.round((foregroundColor.b * alpha) + (backgroundColor.b * (1 - alpha)));
            
            const resultHex = `#${resultR.toString(16).padStart(2, '0')}${resultG.toString(16).padStart(2, '0')}${resultB.toString(16).padStart(2, '0')}`;

            // 4. Update the UI displays
            alphaValueDisplay.textContent = alpha.toFixed(2);
            
            const oneMinusAlpha = (1 - alpha).toFixed(2);

            redCalcDisplay.innerHTML = `<span class="text-red-400 font-bold">R: ${resultR}</span> = (${foregroundColor.r} × ${alpha.toFixed(2)}) + (${backgroundColor.r} × ${oneMinusAlpha})`;
            greenCalcDisplay.innerHTML = `<span class="text-green-400 font-bold">G: ${resultG}</span> = (${foregroundColor.g} × ${alpha.toFixed(2)}) + (${backgroundColor.g} × ${oneMinusAlpha})`;
            blueCalcDisplay.innerHTML = `<span class="text-blue-400 font-bold">B: ${resultB}</span> = (${foregroundColor.b} × ${alpha.toFixed(2)}) + (${backgroundColor.b} × ${oneMinusAlpha})`;

            resultColorBox.style.backgroundColor = `rgb(${resultR}, ${resultG}, ${resultB})`;
            resultColorValue.textContent = resultHex.toUpperCase();
        }

        // Event Listener for the slider
        alphaSlider.addEventListener('input', draw);
        fgColorPicker.addEventListener('input', handleFgColorChange);
        bgColorPicker.addEventListener('input', handleBgColorChange);

        // Initial draw on page load
        window.onload = draw;
    </script>
</body>
</html>



